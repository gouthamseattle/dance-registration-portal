<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dance Class Registration</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
    <link href="css/styles.css?v=55" rel="stylesheet">
</head>
<body>
    <!-- Loading Overlay -->
    <div id="loadingOverlay" class="loading-overlay">
        <div class="spinner-border text-primary" role="status">
            <span class="visually-hidden">Loading...</span>
        </div>
    </div>

    <!-- Registration Closed Status -->
    <div id="registrationStatus" style="display: none;">
        <div class="container-fluid min-vh-100 d-flex align-items-center justify-content-center">
            <div class="text-center">
                <i class="fas fa-lock fa-4x text-warning mb-4"></i>
                <h2>Registration Currently Closed</h2>
                <p class="text-muted">Please check back later for open registration periods.</p>
            </div>
        </div>
    </div>

    <!-- Main Content -->
    <div id="mainContent">
        <!-- Header -->
        <div class="header-section text-center py-5">
            <div class="container">
                <h1>
                    <i class="fas fa-music text-primary"></i>
                    GouMo Dance Chronicles
                </h1>
                <p class="lead">Register for amazing dance experiences</p>
            </div>
        </div>

        <!-- Email Entry Step -->
        <div id="emailEntrySection" class="container py-4">
            <div class="row justify-content-center">
                <div class="col-md-6 col-lg-4">
                    <div class="card">
                        <div class="card-header text-center">
                            <h3><i class="fas fa-envelope text-primary me-2"></i>Get Started</h3>
                            <p class="mb-0 text-muted">Enter your email to see available classes</p>
                        </div>
                        <div class="card-body">
                            <form id="emailEntryForm">
                                <div class="mb-3">
                                    <label for="email" class="form-label">
                                        <i class="fas fa-at text-primary"></i> Email Address
                                    </label>
                                    <input type="email" class="form-control form-control-lg" id="email" 
                                           placeholder="Enter your email address" required>
                                </div>
                                <div class="d-grid">
                                    <button type="submit" class="btn btn-primary btn-lg">
                                        <i class="fas fa-arrow-right me-2"></i>Continue
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Profile Creation Step -->
        <div id="profileCreationSection" class="container py-4" style="display: none;">
            <div class="row justify-content-center">
                <div class="col-md-8 col-lg-6">
                    <div class="card">
                        <div class="card-header text-center">
                            <h3><i class="fas fa-user-plus text-primary me-2"></i>Create Your Profile</h3>
                            <p class="mb-0 text-muted">We need a few details to get you started</p>
                        </div>
                        <div class="card-body">
                            <form id="profileCreationForm">
                                <div class="row">
                                    <div class="col-md-6 mb-3">
                                        <label for="first_name" class="form-label">
                                            <i class="fas fa-user text-primary"></i> First Name *
                                        </label>
                                        <input type="text" class="form-control" id="first_name" name="first_name" required>
                                    </div>
                                    <div class="col-md-6 mb-3">
                                        <label for="last_name" class="form-label">
                                            <i class="fas fa-user text-primary"></i> Last Name
                                        </label>
                                        <input type="text" class="form-control" id="last_name" name="last_name">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="instagram_handle" class="form-label">
                                        <i class="fab fa-instagram text-primary"></i> Instagram Handle
                                    </label>
                                    <div class="input-group">
                                        <span class="input-group-text">@</span>
                                        <input type="text" class="form-control" id="instagram_handle" name="instagram_handle"
                                               placeholder="your_username">
                                    </div>
                                </div>
                                <div class="mb-3">
                                    <label for="dance_experience" class="form-label">
                                        <i class="fas fa-star text-primary"></i> Dance Experience *
                                    </label>
                                    <select class="form-select" id="dance_experience" name="dance_experience" required>
                                        <option value="">Select your experience level</option>
                                        <option value="beginner">Beginner - New to dance</option>
                                        <option value="some_experience">Some Experience - 1-2 years</option>
                                        <option value="intermediate">Intermediate - 2-5 years</option>
                                        <option value="advanced">Advanced - 5+ years</option>
                                        <option value="professional">Professional/Instructor</option>
                                    </select>
                                </div>
                                <div class="alert alert-info">
                                    <i class="fas fa-info-circle me-2"></i>
                                    <small>Your profile will be reviewed by our admin team to determine which classes are available to you.</small>
                                </div>
                                <div class="d-grid gap-2">
                                    <button type="submit" class="btn btn-success btn-lg">
                                        <i class="fas fa-check me-2"></i>Create Profile & View Classes
                                    </button>
                                    <button type="button" class="btn btn-outline-secondary" onclick="app.showEmailEntry()">
                                        <i class="fas fa-arrow-left me-2"></i>Back
                                    </button>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Welcome Back Section -->
        <div id="welcomeBackSection" class="container py-4" style="display: none;">
            <div class="row justify-content-center">
                <div class="col-md-8">
                    <div class="card">
                        <div class="card-header text-center">
                            <h3><i class="fas fa-wave-hand text-primary me-2"></i>Welcome Back!</h3>
                            <p id="welcomeMessage" class="mb-0 text-muted"></p>
                        </div>
                        <div class="card-body text-center">
                            <div id="studentInfo" class="mb-4"></div>
                            <button class="btn btn-primary btn-lg" onclick="app.showAvailableCourses()">
                                <i class="fas fa-calendar me-2"></i>View Available Classes
                            </button>
                            <button class="btn btn-outline-secondary ms-2" onclick="app.showEmailEntry()">
                                <i class="fas fa-user-edit me-2"></i>Different Email?
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Course Selection -->
        <div id="courseSelection" class="container py-4" style="display: none;">
            <div class="row">
                <div class="col-12">
                    <div class="d-flex justify-content-between align-items-center mb-4">
                        <div>
                            <h2><i class="fas fa-calendar text-primary me-2"></i>Available Classes</h2>
                            <p id="courseFilterInfo" class="text-muted mb-0"></p>
                        </div>
                        <button class="btn btn-outline-secondary" onclick="app.showEmailEntry()">
                            <i class="fas fa-arrow-left me-1"></i>Back
                        </button>
                    </div>

                    <!-- Multi-week Series -->
                    <div class="section-header mb-3">
                        <h4><i class="fas fa-graduation-cap text-success me-2"></i>Dance Series</h4>
                        <p class="text-muted mb-0">Multi-week structured programs</p>
                    </div>
                    <div id="multiWeekCourses" class="row mb-5">
                        <!-- Course cards will be populated here -->
                    </div>

                    <!-- Crew Practice Section -->
                    <div id="crewPracticeSection" class="mb-5" style="display: none;">
                        <div class="section-header mb-3">
                            <h4><i class="fas fa-users text-warning me-2"></i>Crew Practice</h4>
                            <p class="text-muted mb-0">Exclusive sessions for crew members</p>
                        </div>
                        <div id="crewPracticeCourses" class="row">
                            <!-- Crew practice cards will be populated here -->
                        </div>
                    </div>

                    <!-- Drop-in Classes -->
                    <div id="dropInSection" class="mb-5">
                        <div class="section-header mb-3">
                            <h4><i class="fas fa-clock text-info me-2"></i>Drop-in Classes</h4>
                            <p class="text-muted mb-0">Single session classes open to everyone</p>
                        </div>
                        <div id="dropInClasses" class="row">
                            <!-- Drop-in cards will be populated here -->
                        </div>
                    </div>

                    <!-- No Courses Message -->
                    <div id="noCoursesMessage" class="text-center py-5" style="display: none;">
                        <i class="fas fa-calendar-times fa-4x text-muted mb-4"></i>
                        <h3>No Classes Available</h3>
                        <p class="text-muted">There are currently no classes available for registration. Please check back soon!</p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Continue with existing registration form sections... -->
    <!-- (These will be added in the next step) -->

    <!-- Success Toast -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
        <div id="successToast" class="toast" role="alert">
            <div class="toast-header text-success">
                <i class="fas fa-check-circle me-2"></i>
                <strong class="me-auto">Success</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div id="successToastBody" class="toast-body"></div>
        </div>
    </div>

    <!-- Error Toast -->
    <div class="toast-container position-fixed top-0 end-0 p-3">
        <div id="errorToast" class="toast" role="alert">
            <div class="toast-header text-danger">
                <i class="fas fa-exclamation-circle me-2"></i>
                <strong class="me-auto">Error</strong>
                <button type="button" class="btn-close" data-bs-dismiss="toast"></button>
            </div>
            <div id="errorToastBody" class="toast-body"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/email-profile-registration.js?v=2"></script>
</body>
</html>
